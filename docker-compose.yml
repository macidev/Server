version: '3.8'
include:
  - path: container/test.yml
  - path: container/mastodon.yml
#  - path: services/rustdesk.yml # check if yml is correct
# bookstack
# collabora
# commento oder Ã„hnliches
# ggf. leantime

services:
  traefik:
      image: traefik:v3.0
      restart: unless-stopped
      ports:
        - "443:443/tcp"
        - "443:443/udp"
        - "80:80"
        - "8080:8080" # deactivate for prod
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock:ro
        - ./letsencrypt:/letsencrypt
        - ./traefik.yml:/traefik.yml
      networks:
        - traefik
      command:
        - "--providers.file.filename=/traefik.yml"

networks:
  traefik:
    name: traefik_web
  external_network:
    name: mastodon_external_network
  internal_network:
    internal: true